// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles

require = (function (modules, cache, entry) {
  // Save the require from previous bundle to this closure if any
  var previousRequire = typeof require === "function" && require;

  function newRequire(name, jumped) {
    if (!cache[name]) {
      if (!modules[name]) {
        // if we cannot find the module within our internal map or
        // cache jump to the current global require ie. the last bundle
        // that was added to the page.
        var currentRequire = typeof require === "function" && require;
        if (!jumped && currentRequire) {
          return currentRequire(name, true);
        }

        // If there are other bundles on this page the require from the
        // previous one is saved to 'previousRequire'. Repeat this as
        // many times as there are bundles until the module is found or
        // we exhaust the require chain.
        if (previousRequire) {
          return previousRequire(name, true);
        }

        var err = new Error('Cannot find module \'' + name + '\'');
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }
      
      localRequire.resolve = resolve;

      var module = cache[name] = new newRequire.Module;

      modules[name][0].call(module.exports, localRequire, module, module.exports);
    }

    return cache[name].exports;

    function localRequire(x){
      return newRequire(localRequire.resolve(x));
    }

    function resolve(x){
      return modules[name][1][x] || x;
    }
  }

  function Module() {
    this.bundle = newRequire;
    this.exports = {};
  }

  newRequire.Module = Module;
  newRequire.modules = modules;
  newRequire.cache = cache;
  newRequire.parent = previousRequire;

  for (var i = 0; i < entry.length; i++) {
    newRequire(entry[i]);
  }

  // Override the current require with this new one
  return newRequire;
})({7:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{bubbles:!0,cancelable:!0};e.dispatchEvent(new CustomEvent(t,n))};exports.default=e;
},{}],6:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},a=function(){function t(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,e,i){return e&&t(a.prototype,e),i&&t(a,i),a}}();function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var i=function(){function i(){e(this,i),this._attributes=i.defaultAttributes}return a(i,[{key:"overrideAttributes",value:function(a){this._attributes=t({},i.defaultAttributes,a)}},{key:"attribute",value:function(t){return this._attributes[t]}}]),i}();i.defaultAttributes={"data-view-link":"data-view-link","data-view-link-active":"data-active","data-view-hint":"data-view-hint","data-view":"data-view","data-view-active":"data-view-active","data-activate-view":"data-activate-view","data-views-loading":"data-views-loading","data-persist-view":"data-persist-view","data-transition":"data-transition"},exports.default=new i;
},{}],5:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),e=require("./utils/dispatchEvent"),n=a(e),r=require("./Config"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,a){try{var u=e[i](a),o=u.value}catch(t){return void n(t)}if(!u.done)return Promise.resolve(o).then(function(t){r("next",t)},function(t){r("throw",t)});t(o)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(t){return i.default.attribute(t)},c=function(t){return t.offsetHeight},f=function(){function e(t){o(this,e),this._view=t,this._name=t.getAttribute(s("data-view"))}return t(e,[{key:"exit",value:function(){var t=u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._view.removeAttribute(s("data-transition")),c(this._view),this._view.setAttribute(s("data-transition"),"out");case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"loading",value:function(){var t=u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._view.removeAttribute(s("data-transition")),c(this._view),this._view.setAttribute(s("data-transition"),"loading");case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"enter",value:function(){var t=u(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={bubbles:!0,cancelable:!0,detail:{name:this._name}},(0,n.default)(this._view,"viewwillupdate",r),this._view.innerHTML=e.innerHTML,(0,n.default)(this._view,"viewupdated",r),this._view.removeAttribute(s("data-transition")),c(this._view),this._view.setAttribute(s("data-transition"),"in");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}();exports.default=f;
},{"./utils/dispatchEvent":7,"./Config":6}],4:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n=require("./Transition"),i=a(n),r=require("./Config"),o=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function i(r,o){try{var a=e[r](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}return i("next")})}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(t){return Array.from(new Set(t))},h=function(t){return o.default.attribute(t)},f=function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,n),this._element=e,this._options=t({},n.options,r),this.active=!!this._element.innerHTML,this._persist=this._element.hasAttribute(h("data-persist-view")),this._activeModel=this._options.model;var o=this._options.transition;if(this._transition=new o(this._element),!(this._transition instanceof i.default))throw new Error("Provided transition is not an instance of Transition")}return e(n,[{key:"hasName",value:function(t){return this._options.name===t}},{key:"_activate",value:function(){var t=u(regeneratorRuntime.mark(function t(e){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._activeModel||this._activeModel.url!==e.url){t.next=3;break}return this.active=!0,t.abrupt("return");case 3:if(this.loading=!0,e.doc.then(function(){i.loading=!1}),t.t0=this.active,!t.t0){t.next=9;break}return t.next=9,this._transition.exit();case 9:return this.loading&&this._transition.loading(),t.next=12,e.querySelector(this.selector);case 12:return n=t.sent,this._activeModel=e,t.next=16,this._transition.enter(n);case 16:this.active=!0;case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_deactivate",value:function(){var t=u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.active){t.next=2;break}return t.abrupt("return");case 2:if(this._persist){t.next=6;break}return this._activeModel=null,t.next=6,this._transition.exit(this._element);case 6:this.active=!1;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"selector",get:function(){return this._options.selector||"["+h("data-view")+'="'+this._options.name+'"]'}},{key:"active",get:function(){return this._active},set:function(t){this._active=t,this._element.setAttribute(h("data-view-active"),t)}},{key:"loading",get:function(){return this._isLoading},set:function(t){var e=this;this._isLoading=t;var n=document.body.hasAttribute(h("data-views-loading"))?document.body.getAttribute(h("data-views-loading")).split(" ")||[]:[],i=t?l([].concat(s(n),[this._options.name])):n.filter(function(t){return t!==e._options.name});document.body.setAttribute(h("data-views-loading"),i.join(" "))}},{key:"model",get:function(){return this._activeModel},set:function(t){var e=this;(t.includesView(this._options.name)?Promise.resolve():t.querySelector(this.selector)).then(function(){return e._activate(t)},function(){return e._deactivate()})}}]),n}();f.options={name:null,persist:!1,transition:i.default,selector:null,model:null},exports.default=f;
},{"./Transition":5,"./Config":6}],3:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t(this,n),this._request=e,this._hints=r,this._doc=null}return e(n,[{key:"includesView",value:function(e){return this._hints.includes(e)}},{key:"querySelector",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";return this.doc.then(function(t){return t.querySelector(e)}).then(function(e){return e&&e.innerHTML?e:Promise.reject()})}},{key:"getRepresentation",value:function(){return{url:this._request.url,hints:this._hints}}},{key:"url",get:function(){return this._request.url}},{key:"doc",get:function(){return this._doc||(this._doc=fetch(this._request).then(function(e){return e.ok?e:Promise.reject()}).then(function(e){return e.text()}).then(function(e){return(new DOMParser).parseFromString(e,"text/html")})),this._doc}}],[{key:"create",value:function(e){var t=e.url,r=e.hints,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new n(new Request(t,u),r||[])}}]),n}();exports.default=n;
},{}],2:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},e=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),r=require("./View"),i=f(r),n=require("./Model"),a=f(n),o=require("./Transition"),u=f(o),s=require("./Config"),c=f(s),l=require("./utils/dispatchEvent"),d=f(l);function f(t){return t&&t.__esModule?t:{default:t}}function h(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function i(n,a){try{var o=e[n](a),u=o.value}catch(t){return void r(t)}if(!o.done)return Promise.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}return i("next")})}}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p="pushState"in history,w=function(t){return c.default.attribute(t)},_=function(){function r(){v(this,r)}return e(r,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p){if(this._initialized)throw new Error("You can only initialize Lipgloss once.");this._initialized=!0,this._options=t({},r.options,e),this._viewsMap=new WeakMap,this._options.overrideAttributes&&c.default.overrideAttributes(this._options.overrideAttributes);var i=this._options.sanitizeUrl(window.location.href);this._model=a.default.create({url:i,hints:[]},this._options.fetch),this._addHistoryEntry(this._model,!0),this._bindEvents(),this.initializeContext(document)}}},{key:"_bindEvents",value:function(){var t=this;this._onLinkClick=this._onLinkClick.bind(this),this._onActivateViewClick=this._onActivateViewClick.bind(this),document.addEventListener("viewupdated",function(e){return t.initializeContext(e.target)}),window.addEventListener("popstate",function(e){return t._onPopState(e)})}},{key:"initializeContext",value:function(t){var e=this;Array.from(t.querySelectorAll("["+w("data-view")+"]")).filter(function(t){return!e._viewsMap.has(t)}).forEach(function(t){return e._viewsMap.set(t,e._buildView(t,e._model))}),t.querySelectorAll("[href]["+w("data-view-link")+"]").forEach(function(t){return t.addEventListener("click",e._onLinkClick)}),t.querySelectorAll("["+w("data-activate-view")+"]").forEach(function(t){return t.addEventListener("click",e._onActivateViewClick)})}},{key:"_buildView",value:function(t,e){var r=t.getAttribute(w("data-view")),n=t.hasAttribute(w("data-persist-view")),a=this._options.transitions[r]||u.default;return new i.default(t,{name:r,transition:a,persist:n,model:e})}},{key:"_throwOnUnknownViewsWithoutParent",value:function(t){var e=this,r=Array.from(t.querySelectorAll("["+w("data-view")+"]")).filter(function(t){var r=t.getAttribute(w("data-view"));return!e.views.some(function(t){return t.hasName(r)})}).find(function(t){return!t.parentNode.closest("["+w("data-view")+"]")});if(r){var i=r.getAttribute(w("data-view"));throw new Error("Not able to determine where ["+w("data-view")+"='"+i+"'] should be inserted.")}}},{key:"_isCurrentUrl",value:function(t){return this._options.sanitizeUrl(t)===this._options.sanitizeUrl(window.location.href)}},{key:"_onLinkClick",value:function(){var t=h(regeneratorRuntime.mark(function t(e){var r,i,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),r=this._options.sanitizeUrl(e.currentTarget.href),i=e.currentTarget.hasAttribute(w("data-view-hint"))?e.currentTarget.getAttribute(w("data-view-hint")).split(","):this._options.defaultHints,n=a.default.create({url:r,hints:i},this._options.fetch),!this._isCurrentUrl(n.url)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,this._updatePage(n);case 8:this._addHistoryEntry(n);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_onActivateViewClick",value:function(){var t=h(regeneratorRuntime.mark(function t(e){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),r=e.currentTarget.getAttribute(w("data-activate-view")),i=this._getModelFromView(r),!this._isCurrentUrl(i.url)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this._updatePage(i);case 7:this._addHistoryEntry(i);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_getModelFromView",value:function(t){var e=document.querySelector("["+w("data-view")+'="'+t+'"]');return this._viewsMap.get(e).model}},{key:"_onPopState",value:function(t){if(t.state&&t.state.model){var e=a.default.create(t.state.model,this._options.fetch);this._updatePage(e)}}},{key:"_updatePage",value:function(){var t=h(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._model=e,t.prev=1,this.views.forEach(function(t){return t.model=e}),t.next=5,e.doc;case 5:r=t.sent,this._throwOnUnknownViewsWithoutParent(r),document.title=r.title,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),window.location.href=e.url;case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_addHistoryEntry",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={title:document.title,url:t.url,model:t.getRepresentation()};e?window.history.replaceState(r,document.title,t.url):window.history.pushState(r,document.title,t.url),(0,d.default)(window,"statechange",{detail:r})}},{key:"views",get:function(){var t=this;return Array.from(document.querySelectorAll("["+w("data-view")+"]")).map(function(e){return t._viewsMap.get(e)})}}]),r}();_.options={defaultHints:[],transitions:{},sanitizeUrl:function(t){return t},fetch:{credentials:"same-origin",cache:"default",redirect:"error",headers:{"X-Requested-With":"XmlHttpRequest"}}},exports.default=_;
},{"./View":4,"./Model":3,"./Transition":5,"./Config":6,"./utils/dispatchEvent":7}],1:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transition=exports.Model=exports.View=void 0;var e=require("./Controller"),r=d(e),t=require("./View"),o=d(t),i=require("./Model"),u=d(i),s=require("./Transition"),l=d(s);function d(e){return e&&e.__esModule?e:{default:e}}exports.View=o.default,exports.Model=u.default,exports.Transition=l.default,exports.default=new r.default;
},{"./Controller":2,"./View":4,"./Model":3,"./Transition":5}]},{},[1])