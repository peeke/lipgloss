!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.t?define(["exports"],n):n((t=t||self).n={})}(this,function(t){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.i=e.i||!1,e.e=!0,"value"in e&&(e.r=!0),Object.defineProperty(t,e.u,e)}}function u(t,n,i){return n&&r(t.prototype,n),i&&r(t,i),t}function i(t){return function(t){if(Array.isArray(t)){for(var n=0,i=new Array(t.length);n<t.length;n++)i[n]=t[n];return i}}(t)||function(t){if(Symbol.o in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=new(function(){function t(){e(this,t),this.s=[]}return u(t,[{u:"push",a:function(n){this.s=[n].concat(i(this.s.filter(function(t){return n.name!==t.name})))}},{u:"delete",a:function(n){this.s=this.s.filter(function(t){return n.name!==t.name})}},{u:"has",a:function(t){return this.s.includes(t)}},{u:"order",c:function(){return this.s}}]),t}()),s={f:"data-view",h:"data-view-slot",v:"data-view-link",l:"data-view-active",d:"data-views-loading",w:"data-views-active",y:"data-deactivate-view",k:"data-transition"},a=function(t,n,i){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};Array.from(t).forEach(function(t){return t.m(n,i,e)})},c=function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t.p(new CustomEvent(n,{b:i,g:!0,P:!0}))},f=function(t){return t._},h={x:function(t,n){var i=t.A(n)||"";return new Set(i.split(" ").filter(Boolean))},j:function(t,n,i){h.O(t,n,i,!0)},B:function(t,n,i){h.O(t,n,i,!1)},V:function(t,n,i){return h.x(t,n).V(i)},O:function(t,n,i,e){var r=h.x(t,n);void 0===e&&(e=!r.V(i)),r[e?"j":"M"](i),t.q(n,Array.from(r).join(" "))}};function v(i){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.C(i.apply(this,t))}catch(t){return Promise.D(t)}}}function l(t,n,i){return i?n?n(t):t:(t&&t.S||(t=Promise.C(t)),n?t.S(n):t)}var d=function(){function n(t){e(this,n),this.H=t}return u(n,[{u:"beforeExit",a:function(){return l()}},{u:"exit",a:v(function(){this.H.I(s.k),f(this.H),this.H.q(s.k,"out")})},{u:"beforeEnter",a:function(){return l()}},{u:"enter",a:v(function(t,n){this.L(t),this.H.I(s.k),f(this.H),this.H.q(s.k,"in")})},{u:"updateHtml",a:function(t){c(this.H,"viewhtmlwillupdate"),this.H.R=t.R,c(this.H,"viewhtmldidupdate")}},{u:"done",a:function(){this.H.I(s.k),f(this.H)}},{u:"view",c:function(){return this.H}}]),n}();var w=0,y={},k=function(){function t(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e(this,t),this.T=new Request(n.U,i),this.z=null,this.W="number"==typeof n.X?n.X:[Date.now(),w++].join("-"),(y[this.W]=this).N=fetch(this.T).S(function(t){return t.F?t:Promise.D()}).S(function(t){return"error"!==i.G?t:n.U!==t.U?Promise.D():t})}var i;return u(t,[{u:"includesView",a:(i=function(n){var t,i,e;return t=this.J,i=function(t){return Boolean(t.K("[".concat(s.f,'="').concat(n,'"]')))},e?i?i(t):t:(t&&t.S||(t=Promise.C(t)),i?t.S(i):t)},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.C(i.apply(this,t))}catch(t){return Promise.D(t)}})},{u:"equals",a:function(t){return!!t&&this.X===t.X}},{u:"id",c:function(){return this.W}},{u:"url",c:function(){return this.T.U}},{u:"doc",c:function(){return this.z||(this.z=this.N.S(function(t){return t.Q()}).S(function(t){return(new DOMParser).Y(t,"text/html")})),this.z}}],[{u:"getById",a:function(t){return y[t]}}]),t}();function m(t,n){if(!n)return t&&t.S?t.S(p):Promise.C()}function p(){}function n(i){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.C(i.apply(this,t))}catch(t){return Promise.D(t)}}}function b(t,n,i){return i?n?n(t):t:(t&&t.S||(t=Promise.C(t)),n?t.S(n):t)}var g=function(){function i(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e(this,i),this.Z=t,this.$=Object.assign(i.tt,n),this.nt=this.it=!!this.Z.R.trim(),this.et=this.$.rt,this.ut="[".concat(s.f,'="').concat(this.$.name,'"]'),this.ot=new this.$.k(this.Z),this.nt&&o.push(this),!(this.ot instanceof d))throw new Error("Provided transition is not an instance of Transition")}return u(i,[{u:"setModel",a:n(function(i){var e=this;if(!i||!i.st(e.et))return b(i.at(e.$.name),function(t){if(t)return c(e.Z,"viewwillupdate"),b(i.J,function(t){var n=t.K(e.ut);return b(n&&Boolean(n.R.trim())?e.ct(i):e.ft(),function(t){e.ot.ht(),c(e.Z,"viewdidupdate")})})})})},{u:"_activate",a:n(function(t){var n,i,e=this;return e.et=t,e.vt=!0,t.J.S(function(){return e.vt=!1}),n=function(){return b(t.J,function(t){var n,i=t.K(e.ut);if(!i)throw n=e.name,new Error("View '".concat(n,"' activated, but not found in the loaded document"));return Boolean(i.R.trim())?(o.V(e)||o.push(e),b(e.ot.lt(i,t),function(){return e.it=!0,e.nt=!0,m(e.dt(i,t))})):(e.nt=!1,void(e.it=!1))})},(i=function(){if(e.nt)return b(e.ot.wt(),function(){return m(e.yt(t.J))})}())&&i.S?i.S(n):n(i)})},{u:"_deactivate",a:n(function(){var t=this;if(t.nt)return o.M(t),b(t.ot.wt(),function(){return t.nt=!1,b(t.yt(),function(){t.it=!1,t.et=null})})})},{u:"_enter",a:n(function(t,n){var i=this;return c(i.Z,"viewwillenter"),b(i.ot.kt(t,n),function(){c(i.Z,"viewdidenter")})})},{u:"_exit",a:n(function(t){var n=this;return c(n.Z,"viewwillexit"),b(n.ot.mt(t),function(){c(n.Z,"viewdidexit")})})},{u:"active",c:function(){return this.pt},bt:function(t){this.pt!==t&&(this.pt=t,this.Z.q(s.l,t),h.O(document.gt,"data-views-active",this.name,t))}},{u:"visible",bt:function(t){this.Pt!==t&&(this.Pt=t,this.Z.q(s.l,t),h.O(document.gt,"data-views-visible",this.name,t))}},{u:"loading",c:function(){return this._t},bt:function(t){this._t!==t&&(this._t=t,h.O(document.gt,s.d,this.name,t))}},{u:"name",c:function(){return this.$.name}},{u:"transition",c:function(){return this.ot}},{u:"model",c:function(){return this.et}}],[{u:"options",c:function(){return{name:null,k:d,rt:null}}}]),i}();function P(){}function _(i){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.C(i.apply(this,t))}catch(t){return Promise.D(t)}}}var x="pushState"in history,A=new(function(){function i(){e(this,i)}return u(i,[{u:"init",a:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(x){this.$=Object.assign({},i.tt,t),this.xt=new WeakMap,this.At=[],Object.assign(s,this.$.Et);var n=this.$.jt(window.Bt.Ot);this.et=new k({U:n},this.$.Vt),this.Mt=this.et,this.qt=!1,this.Ct=this.Ct.bind(this),this.Dt=this.Dt.bind(this),this.St(this.et,!0),this.Ht(),this.It(document),c(window,"lipglossready")}}},{u:"isActive",a:function(t){var n=this.Lt(t);return n&&n.nt}},{u:"_bindEvents",a:function(){var n=this;document.m("viewdidenter",function(t){return n.It(t.Rt)}),window.m("popstate",function(t){return n.Tt(t)})}},{u:"initializeContext",a:function(t){var i=this,n="[".concat(s.f,"], [").concat(s.h,"]");Array.from(t.Ut(n)).filter(function(t){return!i.xt.V(t)}).forEach(function(t){var n=i.zt(t,i.et);i.xt.bt(t,n),i.At.push(n)}),a(t.Ut("[href][".concat(s.v,"]")),"click",this.Ct),a(t.Ut("[".concat(s.y,"]")),"click",this.Dt)}},{u:"_createView",a:function(t,n){var i=t.A(s.f)||t.A(s.h),e=this.$.Wt[i]||d;return new g(t,{name:i,k:e,rt:n})}},{u:"_onLinkClick",a:_(function(t){t.Xt();var n=this.$.jt(t.Nt.Ot);this.Ft(n)})},{u:"openUrl",a:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.$.Vt,i=new k({U:t},n),e=this.et&&this.et.st(i);this.Gt(i),this.St(i,e)}},{u:"_onDeactivateViewClick",a:function(t){t.Xt();var n=t.Nt.A(s.y);this.y(n)}},{u:"deactivateView",a:function(t){var n=this.Lt(t),i=o.Jt.find(function(t){return!t.rt.st(n.rt)});if(!i)throw new Error("Unable to deactivate view ".concat(t,", because there's no view to fall back to."));this.Gt(i.rt),this.St(i.rt)}},{u:"_getViewByName",a:function(n){return this.At.find(function(t){return t.name===n})}},{u:"_onPopState",a:function(t){if(t.Kt)try{var n=k.Qt(t.Kt.Yt);if(!n){var i={U:t.Kt.U,X:t.Kt.Yt};n=new k(i,this.$.Vt)}this.Gt(n)}catch(t){console.Zt(t),window.Bt.Ot=model.U}}},{u:"_queueModel",a:function(t){this.Mt=t,this.qt||this.$t(t)}},{u:"_setModel",a:_(function(e){var t,n,r=this;return r.et=e,r.qt=!0,t=function(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.S?i.S(void 0,n):i}(function(){return c(window,"pagewillupdate"),r.At.forEach(_(function(t){return function(t,n){if(!n)return t&&t.S?t.S(P):Promise.C()}(t.tn(e))})),t=e.J,n=function(t){r.$.nn(t),r.At=r.At.filter(function(t){return Boolean(document.K((n=t.name,"\n  [".concat(s.f,"=").concat(n,"],\n  [").concat(s.h,"=").concat(n,"]\n"))));var n}),c(window,"pagedidupdate")},i?n?n(t):t:(t&&t.S||(t=Promise.C(t)),n?t.S(n):t);var t,n,i},function(t){console.Zt(t),window.Bt.Ot=e.U}),n=function(){r.qt=!1,r.Mt!==e&&r.$t(r.Mt)},t&&t.S?t.S(n):n(t)})},{u:"_addHistoryEntry",a:function(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i={in:document.in,U:t.U,Yt:t.X};history[n?"en":"rn"](i,document.in,t.U),c(window,"statechange",i)}}],[{u:"options",c:function(){return{Wt:{},jt:function(t){return t},nn:function(t){document.in=t.in},Et:{},Vt:{un:"same-origin",on:"default",G:"error",sn:{an:"XmlHttpRequest"}}}}}]),i}());t.cn=g,t.fn=k,t.hn=d,t.vn=s,t.ln=A,Object.defineProperty(t,"dn",{a:!0})});
