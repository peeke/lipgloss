!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.t?define(["exports"],n):n((t=t||self).n={})}(this,function(t){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.e=i.e||!1,i.i=!0,"value"in i&&(i.r=!0),Object.defineProperty(t,i.u,i)}}function n(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}function u(t,n,e){return n in t?Object.defineProperty(t,n,{o:e,e:!0,i:!0,r:!0}):t[n]=e,t}function e(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.c in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=new(function(){function t(){i(this,t),this.a=[]}return n(t,[{u:"push",o:function(n){this.a=[n].concat(e(this.a.filter(function(t){return n.name!==t.name})))}},{u:"delete",o:function(n){this.a=this.a.filter(function(t){return n.name!==t.name})}},{u:"has",o:function(t){return this.a.includes(t)}},{u:"order",s:function(){return this.a}}]),t}()),o={f:"data-view",h:"data-view-slot",v:"data-view-link",l:"data-view-active",d:"data-views-loading",w:"data-views-active",y:"data-deactivate-view",m:"data-transition"},a=function(t,n,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};t.forEach(function(t){t.k(n,e,i)})},s=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=new CustomEvent(n,{p:e,b:!0,g:!0});return t.P(i),i},f=function(t){return t.j},h=function(t,n){return function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).e}))),i.forEach(function(t){u(n,t,e[t])})}return n}({},t,n)},v=function(){var n,t=new Promise(function(t){n=t});return t._=n,t},l={O:function(t,n){var e=t.x(n)||"";return new Set(e.split(" ").filter(Boolean))},A:function(t,n,e){l.q(t,n,e,!0)},M:function(t,n,e){l.q(t,n,e,!1)},B:function(t,n,e){return l.O(t,n).B(e)},q:function(t,n,e,i){var r=l.O(t,n);void 0===i&&(i=!r.B(e)),r[i?"A":"V"](e),t.T(n,Array.from(r).join(" "))}};function d(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}}}function w(t,n,e){return e?n?n(t):t:(t&&t.D||(t=Promise._(t)),n?t.D(n):t)}var y=function(){function e(t,n){i(this,e),this.S=t,this.H=n}return n(e,[{u:"beforeExit",o:function(){return w()}},{u:"exit",o:d(function(t){this.S.I(o.m),f(this.S),this.S.T(o.m,"out")})},{u:"beforeEnter",o:function(){return w()}},{u:"enter",o:d(function(t,n){this.L(t),this.S.I(o.m),f(this.S),this.S.T(o.m,"in")})},{u:"updateHtml",o:function(t){s(this.S,"viewhtmlwillupdate"),this.S.R=t.R,s(this.S,"viewhtmldidupdate")}},{u:"done",o:function(){this.S.I(o.m),f(this.S)}}]),e}();var m=0,k={},p=function(){function t(n){i(this,t),n.U=n.U||{},this.z=new Request(n.W,n.U),this.X=null,this.F=void 0===n.N?[Date.now(),m++].join("-"):n.N,(k[this.F]=this).X=fetch(this.z).D(function(t){return t.G?t:Promise.C()}).D(function(t){return"error"!==n.U.J?t:n.W!==t.W?Promise.C():t}).D(function(t){return t.K()}).D(function(t){return(new DOMParser).Q(t,"text/html")})}var e;return n(t,[{u:"includesView",o:(e=function(n){var t,e,i;return t=this.Y,e=function(t){return Boolean(t.Z("[".concat(o.f,'="').concat(n,'"]')))},i?e?e(t):t:(t&&t.D||(t=Promise._(t)),e?t.D(e):t)},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}})},{u:"equals",o:function(t){return t&&t.N===this.N}},{u:"id",s:function(){return this.F}},{u:"url",s:function(){return this.z.W}},{u:"doc",s:function(){return this.X}}],[{u:"getById",o:function(t){return k[t]}}]),t}();function b(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}}}function g(t,n,e){return e?n?n(t):t:(t&&t.D||(t=Promise._(t)),n?t.D(n):t)}var P=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.$=t,this.tt=Object.assign(e.nt,n),this.et=this.it=!!this.$.R.trim(),this.rt=this.tt.ut,this.ot="[".concat(o.f,'="').concat(this.tt.name,'"]'),this.et&&c.push(this)}return n(e,[{u:"setModel",o:b(function(i,r){var u=this,n=r[u.name];if(!i||!i.ct(u.rt))return g(i.at(u.tt.name),function(t){if(t)return g(i.Y,function(t){var n=t.Z(u.ot),e=n&&Boolean(n.R.trim());return s(u.$,"viewwillupdate"),g(e?u.st(i,r):u.ft(r),function(t){s(u.$,"viewdidupdate")})});u.ht(n)});u.ht(n)})},{u:"_activate",o:b(function(t,n){var e,i,r=this,u=n[r.name],o=new r.tt.m(r.$,n);return r.rt=t,r.vt=!0,t.Y.D(function(){return r.vt=!1}),e=function(){return g(t.Y,function(t){var n,e=t.Z(r.ot);if(!e)throw n=r.name,new Error("View '".concat(n,"' activated, but not found in the loaded document"));return c.push(r),g(o.lt(e,t),function(){return r.it=!0,r.et=!0,s(r.$,"viewwillenter"),u.dt._(),g(o.wt(e,t),function(){s(r.$,"viewdidenter"),u.yt._(),o.mt()})})})},(i=function(){if(r.et)return g(o.kt(),function(){return s(r.$,"viewwillexit"),u.pt._(),g(o.bt(t.Y),function(){s(r.$,"viewdidexit"),u.gt._()})});u.pt._(),u.gt._()}())&&i.D?i.D(e):e(i)})},{u:"_deactivate",o:b(function(t){var n=this,e=t[n.name];if(n.et){var i=new n.tt.m(n.$,t);return c.V(n),g(i.kt(),function(){return n.et=!1,s(n.$,"viewwillexit"),e.pt._(),g(i.bt(),function(){s(n.$,"viewdidexit"),e.gt._(),n.it=!1,e.dt._(),e.yt._(),i.mt(),n.rt=null})})}n.ht(e)})},{u:"_clearMilestone",o:function(t){Object.values(t).forEach(function(t){return t._()})}},{u:"active",s:function(){return this.Pt},jt:function(t){this.Pt!==t&&(this.Pt=t,this.$.T(o.l,t),f(this.$),l.q(document._t,"data-views-active",this.name,t))}},{u:"visible",jt:function(t){this.Ot!==t&&(this.Ot=t,this.$.T(o.l,t),f(this.$),l.q(document._t,"data-views-visible",this.name,t))}},{u:"loading",s:function(){return this.xt},jt:function(t){this.xt!==t&&(this.xt=t,l.q(document._t,o.d,this.name,t))}},{u:"name",s:function(){return this.tt.name}},{u:"transition",s:function(){return this.Et}},{u:"model",s:function(){return this.rt}}],[{u:"options",s:function(){return{name:null,m:y,ut:null}}}]),e}();function j(){}function _(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}}}function O(t,n,e){return e?n?n(t):t:(t&&t.D||(t=Promise._(t)),n?t.D(n):t)}var x="pushState"in history,E=function(){function e(){i(this,e)}return n(e,[{u:"init",o:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(x){this.tt=Object.assign({},e.nt,t),this.At=new WeakMap,this.qt=[],Object.assign(o,this.tt.Mt);var n=this.tt.Bt(window.Tt.Vt);this.rt=new p({W:n,U:this.tt.Ct}),this.Dt=this.rt,this.St=!1,this.Ht=this.Ht.bind(this),this.It=this.It.bind(this),this.Lt(this.rt,!0),this.Rt(),this.Ut(document),s(window,"lipglossready")}}},{u:"_bindEvents",o:function(){var n=this;document.k("viewdidenter",function(t){return n.Ut(t.zt)}),window.k("popstate",function(t){return n.Wt(t)})}},{u:"initializeContext",o:function(t){var e=this,n="[".concat(o.f,"], [").concat(o.h,"]");Array.from(t.Xt(n)).filter(function(t){return!e.At.B(t)}).forEach(function(t){var n=e.Ft(t,e.rt);e.At.jt(t,n),e.qt.push(n)}),setTimeout(function(){a(t.Xt("[href][".concat(o.v,"]")),"click",e.Ht),a(t.Xt("[".concat(o.y,"]")),"click",e.It)},1)}},{u:"openUrl",o:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.tt.Ct,e=new p({W:t,U:n}),i=this.rt&&this.rt.ct(e);this.Nt(e),this.Lt(e,i)}},{u:"deactivateView",o:function(t){var n=this.Gt(t),e=c.Jt.find(function(t){return!t.ut.ct(n.ut)});if(!e)throw new Error("Unable to deactivate view ".concat(t,", because there's no view to fall back to."));this.Nt(e.ut),this.Lt(e.ut)}},{u:"updatePage",o:_(function(e){var i=this;if(!s(window,"pagewillupdate").Kt){var r=i.Qt(),n=i.qt.map(_(function(t){var n=setTimeout(function(){return console.Yt(t.name,"timed out")},i.tt.Zt);return O(t.$t(e,r),function(){clearTimeout(n)})}));return O(e.Y,function(t){return s(window,"pagestartsupdate"),i.tt.tn(t),i.qt=i.qt.filter(function(t){return Boolean(document.Z((n=t.name,"\n  [".concat(o.f,"=").concat(n,"],\n  [").concat(o.h,"=").concat(n,"]\n"))));var n}),O(Promise.nn(n),function(){s(window,"pagedidupdate")})})}})},{u:"isActive",o:function(t){var n=this.Gt(t);return Boolean(n&&n.et)}},{u:"_createView",o:function(t,n){var e=t.x(o.f)||t.x(o.h),i=this.tt.en[e]||y;return new P(t,{name:e,m:i,ut:n})}},{u:"_onLinkClick",o:_(function(t){if(!t.Kt){t.in();var n=this.tt.Bt(t.rn.Vt);this.un(n)}})},{u:"_onDeactivateViewClick",o:function(t){if(!t.Kt){t.in();var n=t.rn.x(o.y);this.y(n)}}},{u:"_getViewByName",o:function(n){return this.qt.find(function(t){return t.name===n})}},{u:"_onPopState",o:function(t){if(t.on)try{var n=p.cn(t.on.an)||new p({W:t.on.W,N:t.on.an,U:this.tt.Ct});this.Nt(n)}catch(t){console.sn(t),window.Tt.Vt=model.W}}},{u:"_queueModel",o:function(t){this.Dt=t,this.St||this.fn(t)}},{u:"_updateModel",o:_(function(n){var t,e,i=this;return i.rt=n,i.St=!0,t=function(t,n){try{var e=t()}catch(t){return n(t)}return e&&e.D?e.D(void 0,n):e}(function(){return function(t,n){if(!n)return t&&t.D?t.D(j):Promise._()}(i.hn(n))},function(t){console.sn(t),window.Tt.Vt=n.W}),e=function(){i.St=!1,i.Dt!==n&&i.fn(i.Dt)},t&&t.D?t.D(e):e(t)})},{u:"_getFreshMilestones",o:function(){return this.qt.map(function(t){return u({},t.name,{pt:v(),gt:v(),dt:v(),yt:v()})}).reduce(h)}},{u:"_addHistoryEntry",o:function(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e={vn:document.vn,W:t.W,an:t.N};history[n?"ln":"dn"](e,document.vn,t.W),s(window,"statechange",e)}}]),e}();u(E,"options",{en:{},Zt:3e3,Bt:function(t){return t},tn:function(t){document.vn=t.vn},Mt:{},Ct:{wn:"same-origin",yn:"default",J:"error",mn:{kn:"XmlHttpRequest"}}});var A=new E;t.pn=E,t.bn=P,t.gn=p,t.Pn=y,t.Mt=o,t.jn=A,Object.defineProperty(t,"_n",{o:!0})});
