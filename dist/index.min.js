!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.t?define(["exports"],n):n((t=t||self).n={})}(this,function(t){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.e=i.e||!1,i.i=!0,"value"in i&&(i.r=!0),Object.defineProperty(t,i.u,i)}}function n(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}function u(t,n,e){return n in t?Object.defineProperty(t,n,{o:e,e:!0,i:!0,r:!0}):t[n]=e,t}function e(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.c in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=new(function(){function t(){i(this,t),this.s=[]}return n(t,[{u:"push",o:function(n){this.s=[n].concat(e(this.s.filter(function(t){return n.name!==t.name})))}},{u:"delete",o:function(n){this.s=this.s.filter(function(t){return n.name!==t.name})}},{u:"has",o:function(t){return this.s.includes(t)}},{u:"order",a:function(){return this.s}}]),t}()),o={f:"data-view",h:"data-view-slot",v:"data-view-link",l:"data-view-active",d:"data-views-loading",w:"data-views-active",y:"data-deactivate-view",k:"data-transition"},s=function(t,n,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};Array.from(t).forEach(function(t){return t.m(n,e,i)})},a=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t.b(new CustomEvent(n,{p:e,g:!0,P:!0}))},f=function(t){return t.j},h=function(t,n){return function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).e}))),i.forEach(function(t){u(n,t,e[t])})}return n}({},t,n)},v=function(){var n,t=new Promise(function(t){n=t});return t._=n,t},l={x:function(t,n){var e=t.O(n)||"";return new Set(e.split(" ").filter(Boolean))},A:function(t,n,e){l.M(t,n,e,!0)},V:function(t,n,e){l.M(t,n,e,!1)},B:function(t,n,e){return l.x(t,n).B(e)},M:function(t,n,e,i){var r=l.x(t,n);void 0===i&&(i=!r.B(e)),r[i?"A":"D"](e),t.q(n,Array.from(r).join(" "))}};function d(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}}}function w(t,n,e){return e?n?n(t):t:(t&&t.S||(t=Promise._(t)),n?t.S(n):t)}var y=function(){function e(t,n){i(this,e),this.W=t,this.H=n}return n(e,[{u:"beforeExit",o:function(){return w()}},{u:"exit",o:d(function(t){this.W.I(o.k),f(this.W),this.W.q(o.k,"out")})},{u:"beforeEnter",o:function(){return w()}},{u:"enter",o:d(function(t,n){this.L(t),this.W.I(o.k),f(this.W),this.W.q(o.k,"in")})},{u:"updateHtml",o:function(t){a(this.W,"viewhtmlwillupdate"),this.W.R=t.R,a(this.W,"viewhtmldidupdate")}},{u:"done",o:function(){this.W.I(o.k),f(this.W)}}]),e}();var k=0,m={},b=function(){function t(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.U=new Request(n.z,e),this.T=null,this.X="number"==typeof n.F?n.F:[Date.now(),k++].join("-"),(m[this.X]=this).N=fetch(this.U).S(function(t){return t.G?t:Promise.C()}).S(function(t){return"error"!==e.J?t:n.z!==t.z?Promise.C():t})}var e;return n(t,[{u:"includesView",o:(e=function(n){var t,e,i;return t=this.K,e=function(t){return Boolean(t.Q("[".concat(o.f,'="').concat(n,'"]')))},i?e?e(t):t:(t&&t.S||(t=Promise._(t)),e?t.S(e):t)},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}})},{u:"equals",o:function(t){return!!t&&this.F===t.F}},{u:"id",a:function(){return this.X}},{u:"url",a:function(){return this.U.z}},{u:"doc",a:function(){return this.T||(this.T=this.N.S(function(t){return t.Y()}).S(function(t){return(new DOMParser).Z(t,"text/html")})),this.T}}],[{u:"getById",o:function(t){return m[t]}}]),t}();function p(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}}}function g(t,n,e){return e?n?n(t):t:(t&&t.S||(t=Promise._(t)),n?t.S(n):t)}var P=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.$=t,this.tt=Object.assign(e.nt,n),this.et=this.it=!!this.$.R.trim(),this.rt=this.tt.ut,this.ot="[".concat(o.f,'="').concat(this.tt.name,'"]'),this.et&&c.push(this)}return n(e,[{u:"setModel",o:p(function(e,i){var r=this;if(!e||!e.ct(r.rt))return g(e.st(r.tt.name),function(t){if(t)return a(r.$,"viewwillupdate"),g(e.K,function(t){var n=t.Q(r.ot);return g(n&&Boolean(n.R.trim())?r.at(e,i):r.ft(i),function(t){a(r.$,"viewdidupdate")})})})})},{u:"_activate",o:p(function(t,n){var e,i,r=this,u=n[r.name],o=new r.tt.k(r.$,n);return r.rt=t,r.ht=!0,t.K.S(function(){return r.ht=!1}),e=function(){return g(t.K,function(t){var n,e=t.Q(r.ot);if(!e)throw n=r.name,new Error("View '".concat(n,"' activated, but not found in the loaded document"));return c.push(r),g(o.vt(e,t),function(){return r.it=!0,r.et=!0,a(r.$,"viewwillenter"),u.lt._(),g(o.dt(e,t),function(){a(r.$,"viewdidenter"),u.wt._(),o.yt()})})})},(i=function(){if(r.et)return g(o.kt(),function(){return a(r.$,"viewwillexit"),u.mt._(),g(o.bt(t.K),function(){a(r.$,"viewdidexit"),u.pt._()})});u.mt._(),u.pt._()}())&&i.S?i.S(e):e(i)})},{u:"_deactivate",o:p(function(t){var n=this;if(n.et){var e=t[n.name],i=new n.tt.k(n.$,t);return c.D(n),g(i.kt(),function(){return n.et=!1,a(n.$,"viewwillexit"),e.mt._(),g(i.bt(),function(){a(n.$,"viewdidexit"),e.pt._(),n.it=!1,e.lt._(),e.wt._(),i.yt(),n.rt=null})})}})},{u:"active",a:function(){return this.gt},Pt:function(t){this.gt!==t&&(this.gt=t,this.$.q(o.l,t),l.M(document.jt,"data-views-active",this.name,t))}},{u:"visible",Pt:function(t){this._t!==t&&(this._t=t,this.$.q(o.l,t),l.M(document.jt,"data-views-visible",this.name,t))}},{u:"loading",a:function(){return this.xt},Pt:function(t){this.xt!==t&&(this.xt=t,l.M(document.jt,o.d,this.name,t))}},{u:"name",a:function(){return this.tt.name}},{u:"transition",a:function(){return this.Et}},{u:"model",a:function(){return this.rt}}],[{u:"options",a:function(){return{name:null,k:y,ut:null}}}]),e}();function j(t,n,e){return e?n?n(t):t:(t&&t.S||(t=Promise._(t)),n?t.S(n):t)}function _(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise._(e.apply(this,t))}catch(t){return Promise.C(t)}}}var x="pushState"in history,E=new(function(){function e(){i(this,e)}return n(e,[{u:"init",o:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(x){this.tt=Object.assign({},e.nt,t),this.Ot=new WeakMap,this.At=[],Object.assign(o,this.tt.Mt);var n=this.tt.Vt(window.Dt.Bt);this.rt=new b({z:n},this.tt.qt),this.Ct=this.rt,this.St=!1,this.Wt=this.Wt.bind(this),this.Ht=this.Ht.bind(this),this.It(this.rt,!0),this.Lt(),this.Rt(document),a(window,"lipglossready")}}},{u:"isActive",o:function(t){var n=this.Ut(t);return n&&n.et}},{u:"_bindEvents",o:function(){var n=this;document.m("viewdidenter",function(t){return n.Rt(t.zt)}),window.m("popstate",function(t){return n.Tt(t)})}},{u:"initializeContext",o:function(t){var e=this,n="[".concat(o.f,"], [").concat(o.h,"]");Array.from(t.Xt(n)).filter(function(t){return!e.Ot.B(t)}).forEach(function(t){var n=e.Ft(t,e.rt);e.Ot.Pt(t,n),e.At.push(n)}),s(t.Xt("[href][".concat(o.v,"]")),"click",this.Wt),s(t.Xt("[".concat(o.y,"]")),"click",this.Ht)}},{u:"_createView",o:function(t,n){var e=t.O(o.f)||t.O(o.h),i=this.tt.Nt[e]||y;return new P(t,{name:e,k:i,ut:n})}},{u:"_onLinkClick",o:_(function(t){t.Gt();var n=this.tt.Vt(t.Jt.Bt);this.Kt(n)})},{u:"openUrl",o:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.tt.qt,e=new b({z:t},n),i=this.rt&&this.rt.ct(e);this.Qt(e),this.It(e,i)}},{u:"_onDeactivateViewClick",o:function(t){t.Gt();var n=t.Jt.O(o.y);this.y(n)}},{u:"deactivateView",o:function(t){var n=this.Ut(t),e=c.Yt.find(function(t){return!t.ut.ct(n.ut)});if(!e)throw new Error("Unable to deactivate view ".concat(t,", because there's no view to fall back to."));this.Qt(e.ut),this.It(e.ut)}},{u:"_getViewByName",o:function(n){return this.At.find(function(t){return t.name===n})}},{u:"_onPopState",o:function(t){if(t.Zt)try{var n=b.$t(t.Zt.tn);if(!n){var e={z:t.Zt.z,F:t.Zt.tn};n=new b(e,this.tt.qt)}this.Qt(n)}catch(t){console.nn(t),window.Dt.Bt=model.z}}},{u:"_queueModel",o:function(t){this.Ct=t,this.St||this.en(t)}},{u:"_setModel",o:_(function(i){var t,n,r=this;return r.rt=i,r.St=!0,t=function(t,n){try{var e=t()}catch(t){return n(t)}return e&&e.S?e.S(void 0,n):e}(function(){a(window,"pagewillupdate");var n=r.in(),e=Promise.rn(r.At.map(_(function(t){return t.un(i,n)})));return j(i.K,function(t){return r.tt.on(t),r.At=r.At.filter(function(t){return Boolean(document.Q((n=t.name,"\n  [".concat(o.f,"=").concat(n,"],\n  [").concat(o.h,"=").concat(n,"]\n"))));var n}),j(e,function(){a(window,"pagedidupdate")})})},function(t){console.nn(t),window.Dt.Bt=i.z}),n=function(){r.St=!1,r.Ct!==i&&r.en(r.Ct)},t&&t.S?t.S(n):n(t)})},{u:"_getFreshMilestones",o:function(){return this.At.map(function(t){return u({},t.name,{mt:v(),pt:v(),lt:v(),wt:v()})}).reduce(h)}},{u:"_addHistoryEntry",o:function(t){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e={cn:document.cn,z:t.z,tn:t.F};history[n?"sn":"an"](e,document.cn,t.z),a(window,"statechange",e)}}],[{u:"options",a:function(){return{Nt:{},Vt:function(t){return t},on:function(t){document.cn=t.cn},Mt:{},qt:{fn:"same-origin",hn:"default",J:"error",vn:{ln:"XmlHttpRequest"}}}}}]),e}());t.dn=P,t.wn=b,t.yn=y,t.kn=o,t.mn=E,Object.defineProperty(t,"bn",{o:!0})});
